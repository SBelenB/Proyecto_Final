{% extends 'base.html' %}
{% load static %}


{% block contenido %}
<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for publicacion in publicaciones %}
    <!-- Tarjeta de Publicación -->
    <div class="col">
        <div class="card h-100">
            <!-- Condicional para mostrar imagen si existe -->
            {% if publicacion.imagen %}
            <img src="{{ publicacion.imagen.url }}" class="card-img-top" alt="...">
            {% else %}
            <img src="{% static 'images/default_post.png' %}" class="card-img-top" alt="...">
            {% endif %}

            <div class="card-body">
                <h4 class="card-title">{{publicacion.titulo}}</h4>
                <p class="card-text">{{publicacion.cuerpo}}</p>
            </div>

            <!-- Footer de la tarjeta -->
            <div class="card-footer">
                <div class="d-grid gap-2 mx-auto">
                    <a href="{% url 'detalle-publicacion' publicacion.id %}" class="btn btn-outline-secondary" role="button">Ver publicación</a>
                </div>

                {{publicacion.fecha}} - <strong style="color: black;">@{{publicacion.creador.username}}</strong>

                <!-- Verificamos si el usuario está logeado para mostrar opciones de modificación -->
                {% if user.is_authenticated %}
                <!-- Comprobamos que sea el creador del post o un superuser -->
                {% if user == publicacion.creador or user.is_superuser %}
                <span>
                    <!-- Botón eliminar -->
                    <a href="{% url 'eliminar-publicacion' publicacion.id %}">
                        <i class="fa-solid fa-trash" style="margin-right: 5px; margin-top: 5px; float: right;"></i>
                    </a>
                    <!-- Botón modificar -->
                    <a href="{% url 'modificar-publicacion' publicacion.id %}">
                        <i class="fa-regular fa-pen-to-square" style="margin-right: 10px; margin-top: 5px; float: right;"></i>
                    </a>
                </span>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<!--
    <div class="col">
        <div class="card h-100">
            <img src="..." class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title"></h5>
                <p class="card-text"></p>
            </div>
            <div class="card-footer">
                <small class="text-body-secondary">Last updated 3 mins ago</small>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="card h-100">
            <img src="..." class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title"></h5>
                <p class="card-text"></p>
            </div>
            <div class="card-footer">
                <small class="text-body-secondary">Last updated 3 mins ago</small>
            </div>
        </div>
    </div>
</div>







<!-
<div style="display: flex; flex-wrap: wrap; justify-content: center; padding: 5%;">
    {% for publicacion in publicaciones %}
    <!- Tarjeta de Publicación
    <div class="card" style="width: calc(30% - 20px); box-sizing: border-box; margin-bottom: 30px; margin-right: 30px;">
        <div class="card-header">
            {{publicacion.fecha}} - <strong style="color: black;">@{{publicacion.creador.username}}</strong>
            {% if user.is_authenticated %}
            {% if user == publicacion.creador or user.is_superuser %}
            <span>
                 Botón eliminar
                <a href="{% url 'eliminar-publicacion' publicacion.id %}">
                    <i class="fa-solid fa-trash" style="margin-right: 5px; float: right;"></i>
                </a>
                <!- Botón modificar --
                <a href="{% url 'modificar-publicacion' publicacion.id %}">
                    <i class="fa-regular fa-pen-to-square" style="margin-right: 10px; float: right;"></i>
                </a>
            </span>
            {% endif %}
            {% endif %}
        </div>
        <div class="card-body">
            <h5 class="card-title">{{publicacion.titulo}}</h5>
            <p class="card-text">{{publicacion.cuerpo}}</p>
            <a href="{% url 'detalle-publicacion' publicacion.id %}" class="btn btn-primary">Leer más</a>
            <p class="card-text" style="display: inline-block; margin-left: 10px;"><i class="fa-solid fa-tag"></i>
                {{publicacion.categoria}}</p>
        </div>
    </div>
    {% endfor %}
</div>-->
{% endblock contenido %}