{% extends 'base.html' %}
{% load static %}


{% block contenido %}
<!-- Banner -->
<section id="banner" class="min">
    <div class="inner">

        <header style="text-align: center; border-radius: 20px; background-color:#007f7f; padding: 10px;">
            <h1 style="display: inline-block; padding: 10px; background-color: #007f7f; border-radius: 10px;">¿ESTÁS
                LISTO PARA DESCUBRIR CUAN VALIENTE ERES? 🔪 🩸 🦇 🕯 🪦 ☠</h1>
        </header>
    </div>
</section>


<article class="card" style="display: grid; background-color: #7ccf87; border: 5px solid black;">
    <img class="card-img-top" src="{% static 'images/it-banner.png' %}"
        style="width: 80%; height: auto; place-self: center; margin-top: 20px; border: 5px solid black;" alt=" ">
    <div class="card-body" style="width: auto; height: auto;">
        <h4 class="card-title">IT</h4>
        <p class="card-text">It, es una novela de terror publicada en 1986 por el escritor estadounidense Stephen King.
            Cuenta la historia, en un juego de correspondencias con el pasado y el presente, de un grupo de siete amigos
            que son perseguidos por una entidad sobrenatural, al que llaman «Eso», que es capaz de cambiar de forma y se
            alimenta principalmente del terror que produce en sus víctimas. La narración orbita en torno a la localidad
            ficticia de Derry y la inexplicable aura de horror y muerte que la rodea.</p>
    </div>
</article>
{% if user.is_authenticated %}
<form method="post" enctype="multipart/form-data"> {% csrf_token %}
    {{form}}

    <button type="submit" style="margin-top: 30px;">Comentar!</button>

</form>
{% else %}
<p style="margin-top: 30px;"><a href="{% url 'login' %}">Inicia sesión</a> para comentar</p>
{% endif %}
<div class="card" style="width: 100%; padding: 5px;">
    <div class="card-header">
        COMENTARIOS
    </div>


    <ul class="list-group list-group-flush">


        {% if publicacion.comentarios.all %}

        {% for comentario in publicacion.comentarios.all %}
        <div class="comentario-header">
            <strong>{{comentario.creador}}</strong>

            {% if user.is_authenticated %}
            {% if user == comentario.creador %}
            <!-- Mostrar botones solo si el usuario actual es el creador del comentario -->
            <a href="{% url 'borrar-comentario' comentario.id %}">
                <i class="fa-solid fa-trash"></i>
            </a>
            <a href="{% url 'editar-comentario' comentario.id %}">
                <i class="fa-solid fa-pen-to-square"></i>
            </a>
            {% else %}
            <!-- Mostrar mensaje de falta de permisos -->
            <span style="color: red;">No tienes permisos para modificar/eliminar este comentario.</span>
            {% endif %}
            {% endif %}
        </div>

        <li class="list-group-item">{{comentario.texto}}</li>
        {% endfor %}


        {% else %}
        <p>No hay comentario aun.</p>
        {% endif %}



    </ul>

</div>


{% endblock contenido %}